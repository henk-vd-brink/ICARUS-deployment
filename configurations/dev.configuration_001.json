{
  "version": "1.0",
  "target_condition": "deviceId='icarus-jn-002'",
  "container_registries": {
    "cricarusdev": {
      "address": "cricarusdev.azurecr.io",
      "password": "{{ CRICARUSDEV_PASSWORD }}",
      "username": "{{ CRICARUSDEV_USERNAME }}"
    }
  },
  "modules": {
    "icarus-edge-detector": {
      "type": "docker",
      "settings": {
        "image": "cricarusdev.azurecr.io/icarus-edge-detector:main-6b36ccee291cf7e072a293ea082509c3e8cb3d3f",
        "create_options": {
          "Entrypoint": [
            "/home/docker_user/scripts/start.dev.sh"
          ],
          "HostConfig": {
            "Binds": [
              "/tmp/argus_socket:/tmp/argus_socket"
            ]
          }
        }
      },
      "environment": {
        "REMOTE_IP_ADDRESS": "10.8.0.2",
        "REMOTE_FILE_SENDER_PORT": "8443",
        "REMOTE_META_DATA_SENDER_PORT": "5672",
        "REMOTE_META_DATA_SENDER_USERNAME": "guest",
        "REMOTE_META_DATA_SENDER_PASSWORD": "guest",
        "META_DATA_SENDER": "iot_edge"
      }
    },
    "icarus-edge-blobstorage": {
      "type": "docker",
      "settings": {
        "image": "mcr.microsoft.com/azure-blob-storage:latest",
        "create_options": {
          "Env": [
            "LOCAL_STORAGE_ACCOUNT_NAME=icaruslocaldev1",
            "LOCAL_STORAGE_ACCOUNT_KEY=DNFSxS+W83hewfgPYHVxAmmxCRSG23d5G2/pyYdMotsNWdICtz5PMiRmRAztvjkdyoczfkl0+Bsr+AStgXzQzQ=="
          ],
          "HostConfig": {
            "Binds": [
              "/home/icarusadmin/data:/blobroot"
            ],
            "PortBindings": {
              "11002/tcp": [
                {
                  "HostPort": "11002"
                }
              ]
            }
          }
        }
      },
      "properties.desired": {
        "deviceAutoDeleteProperties": {
          "deleteOn": true,
          "deleteAfterMinutes": 600,
          "retainWhileUploading": true
        },
        "deviceToCloudUploadProperties": {
          "uploadOn": true,
          "uploadOrder": "OldestFirst",
          "cloudStorageConnectionString": "{{ STORAGE_ACCOUNT_CONNECTION_STRING }}",
          "storageContainersForUpload": {
            "icaruslocaldev1": {
              "target": "icarus-dev"
            }
          },
          "deleteAfterUpload": true
        }
      },
      "environment": {
        "PLACE_HOLDER": "place_holder"
      }
    }
  }
}